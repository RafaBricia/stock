<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Código de Barras</title>
    <link rel="stylesheet" href="../CSS/syles.css">
    <link rel="icon" href="">
    <link rel="shortcut icon" type="imagex/png" href="../ÍCONES/icone aba branco.svg">

</head>


<body>

    <!-- INÍCIO DA DIV MOBILE -->

    <div class="mobile">

        <!-- INÍCIO DIV BARRA INICIAL -->

        <div id="topo">

            <a href="../HTML/tela-buscar-COD.html"><img src="../ÍCONES/voltar icone.svg"
                    alt="botão de voltar para o início" height="50px" width="50px">
                <h3 class="titulo">Stock</h3>
            </a>


        </div>
        <!-- FIM DIV BARRA INICIAL -->



        <!-- INÍCIO DIV SCANNER QUAGGA -->

        <div class="scanner-quagga">


            <div class="container-camera">
                <div id="camera"></div>
                <div id="resultado"></div>
            </div>

            <script src="quagga.min.js"></script>
            <script>
                Quagga.init({
                    inputStream: {
                        name: "Live",
                        type: "LiveStream",
                        target: document.querySelector('#camera')
                    },
                    decoder: {
                        readers: ["code_128_reader", "ean_reader", "ean_8_reader", "code_39_reader", "code_39_vin_reader", "codabar_reader", "upc_reader", "upc_e_reader", "i2of5_reader"]
                    }
                }, function (err) {
                    if (err) {
                        console.log(err);
                        return;
                    }
                    console.log("Initialization finished. Ready to start");
                    Quagga.start();
                });

                Quagga.onDetected(function (data) {
                    console.log(data);
                    const code = data.codeResult.code;
                    document.querySelector("#resultado").innerHTML = code;

                    setTimeout(function () {
                        window.location.href = `cadastro-produto.html?codigo=${code}`;
                    }, 3000);

                    // Parar de ler
                    Quagga.stop();

                    //LER E SAIR

                });
            </script>


        </div>

        <!-- FIM DIV SCANNER QUAGGA -->

        <div class="botao-continuar">
            <a href="../HTML/cadastro-produto.html">
                <p>
                    Continuar
                </p>
            </a>
        </div>

    </div>

    <!-- INÍCIO A DIV DESKTOP-->

    <div id="desktop">


        <div class="saudacao">

            <img src="../ÍCONES/NOVO BACKGROUND.jpg" width="100%" height="100%">

        </div>

    </div>


    <!-- FIM DA DIV DESKTOP -->


    <script type="module" src="../JS/dinamica-front.js"></script>


</body>

</html>